function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray$1(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}var stringable=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.string&&(!t||e.length>0)},strLen=function(e){var t=0;if(!stringable(e))return t;for(var r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<256?1:3;return t},kRegSignNumberic=new RegExp("^\\d+(\\.|\\.\\d+)?$","i"),kRegUnSignNumberic=new RegExp("^\\-\\d+(\\.|\\.\\d+)?$","i"),kRegNumberic=new RegExp("^\\-?\\d+(\\.|\\.\\d+)?$","i"),kRegStartStrictNumberic=new RegExp("^(\\-?[1-9]|0\\.\\d+|0$)","i"),kRegEndStrictNumberic=new RegExp("\\.$","i"),kEmptySpacer=new RegExp("(^$|^\\s+$)","i"),isNil=function(e){return isNull(e)||isUndefined(e)||typeis(e)===Types.string&&re(kEmptySpacer,e)},isNull=function(e){return typeis(e)===Types.null},isUndefined=function(e){return typeis(e)===Types.undefined},isNumberic=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(isNil(e))return!1;if(!re(kRegStartStrictNumberic,e)||re(kRegEndStrictNumberic,e))return!1;var n=+e;return!isNaN(n)&&(r?typeis(t)===Types.bool?re(t?kRegSignNumberic:kRegUnSignNumberic,n):re(kRegNumberic,n):typeis(n)===Types.number)},objectable=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.object&&(!t||Object.keys(e).length>0)},optional=function optional(path,obj){var separator=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",rs=void 0,properties;if(!stringable(path)||!stringable(separator))return rs;var p=path,o;if(properties=-1===p.indexOf(separator)?Array.of(p):p.split(separator),typeis(obj)!==Types.object&&typeis(obj)!==Types.array){try{o=isNumberic(properties[0])?eval("this[".concat(properties[0],"]")):eval("this."+properties[0])}catch(e){o=Object.prototype.constructor()}if(properties.shift(),typeis(o)===Types.object)o=o;else{if(typeis(o)!==Types.array)return rs;o=o}}else o=obj;return rs=properties.reduce((function(e,t){return objectable(e)?e[t]:arrayable(e)?isNumberic(t)?e[+t]:e[t]:void 0}),o),rs},extractable=function extractable(){for(var rs=Object.prototype.constructor(),_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!arrayable(args)||args.length<2)return rs;var t=Array.prototype.slice.call(args,-1)[0];if(typeis(t)===Types.string)try{t=eval("this."+t)}catch(e){t=void 0}if(!objectable(t))return rs;var o=Array.prototype.slice.apply(args,[0,-1]),_iterator=_createForOfIteratorHelper(o),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;typeis(i)===Types.string?rs[i]=optional(i,t)||String.prototype.constructor():typeis(i)===Types.array?2===i.length?rs[i[0]]=(typeis(i[1])===Types.string?optional(i[1],t):i[1])||String.prototype.constructor():3===i.length&&(rs[i[0]]=objectable(i[2])||arrayable(i[2])?optional(i[1],i[2]):String.prototype.constructor()):typeis(i)===Types.object&&(rs=Object.assign(rs,i))}}catch(e){_iterator.e(e)}finally{_iterator.f()}return rs},assign=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(objectable(r)){if(!stringable(t)&&!arrayable(t))return r;stringable(t)&&(t=t.split(o)),t.length>1?e(t,r[t.shift()],n):r[t[0]]=n}},objReverse=function(e){if(!objectable(e))return e;var t=e,r=Object.keys(t).reduce((function(e,r){var n=String(t[r]),o=[];return arrayable(e[n],!1)&&(o=e[n]),Object.assign(e,_defineProperty$1({},n,o.concat(r)))}),{});for(var n in r)r.hasOwnProperty(n)&&(r[n]=Array.isArray(r[n])&&1===r[n].length?r[n][0]:r[n]);return r},Types,TypesDesc,e;e=Types||(Types={}),e.number="number",e.string="string",e.bool="bool",e[void 0]="undefined",e.null="null",e.array="array",e.uint8Array="uint8Array",e.object="object",e.function="function",e.bigInt="bigInt",e.date="date",e.weakMap="weakMap",e.map="map",e.weakSet="weakSet",e.set="set",e.symbol="symbol",e.arrayBuffer="arrayBuffer",e.unknown="",function(e){e["[object Number]"]="number",e["[object String]"]="string",e["[object Boolean]"]="bool",e["[object Undefined]"]="undefined",e["[object Null]"]="null",e["[object Array]"]="array",e["[object Uint8Array]"]="uint8Array",e["[object Object]"]="object",e["[object Function]"]="function",e["[object BigInt]"]="bigInt",e["[object Date]"]="date",e["[object WeakMap]"]="weakMap",e["[object Map]"]="map",e["[object WeakSet]"]="weakSet",e["[object ArrayBuffer]"]="arrayBuffer",e["[object Set]"]="set",e["[object Symbol]"]="symbol"}(TypesDesc||(TypesDesc={}));var inEnum=function(e,t){return!(!objectable(e)||e!==Object(e))&&(Object.prototype.hasOwnProperty.call(e,t)||Object.values(e).indexOf(t)>-1)},typeis=function(e){var t=Object.prototype.toString.call(e),r=Types.unknown;return Object.keys(TypesDesc).includes(t)&&(r=Types[TypesDesc[t]]),r},re=function(e,t){return e.test(t.toString())},arrayable=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(typeis(e)===Types.array||typeis(e)===Types.uint8Array)&&(!t||e.length>0)},arrayUnique=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!arrayable(e))return e;if(t){var r=e.map((function(e){return JSON.stringify(e)}));return Array.from(new Set(r)).map((function(e){return JSON.parse(e)}))}return Array.from(new Set(e))},arrValsCount=function(e){var t={};return arrayable(e)?e.reduce((function(e,t){var r=t+"";return e[r]?e[r]++:e[r]=1,e}),t):t},arrValCount=function(e,t){if(!arrayable(e)||!e.includes(t))return 0;var r=arrValsCount(e),n=t+"";return r.hasOwnProperty(n)?r[n]:0},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",InvalidCharacterError=function e(t){_classCallCheck$1(this,e),_defineProperty$1(this,"name",void 0),_defineProperty$1(this,"message",void 0),this.message=t,this.name="InvalidCharacterError"},_btoa,_atob;_btoa="undefined"!=typeof window&&window.btoa?window.btoa:function(e){for(var t=String(e),r="",n=0,o=0,i=0,a=chars;t.charAt(0|i)||(a="=",i%1);r+=a.charAt(63&n>>8-i%1*8)){if((o=t.charCodeAt(i+=3/4))>255)throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return r},_atob="undefined"!=typeof window&&window.atob?window.atob:function(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n="",o=0,i=0,a=0;r=t.charAt(a++);~r&&(i=o%4?64*i+r:r,o++%4)?n+=String.fromCharCode(255&i>>(-2*o&6)):0)r=chars.indexOf(r);return n};var url2Blob=function(e){if("undefined"==typeof window)throw new Error("url2Blob only works in browser environment");if(!stringable(e))throw new TypeError(e+" can not be null");var t=e.split(",");if(!arrayable(t))throw new ReferenceError("invalid data url");var r=t[0].match(/:(.*?);/);if(!arrayable(r)||r.length<2)throw new ReferenceError("invalid data format");for(var n=r,o=_atob(t[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new Blob([a],{type:n[1]})},str2Buffer=function(e){if(stringable(e))return e=_btoa(unescape(encodeURIComponent(e))),new Uint8Array(Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)})))},buffer2Str=function(e){if(arrayable(e)||objectable(e)||stringable(e)){typeis(e)===Types.string&&(e=JSON.parse.call(null,e));var t=Object.values(e);if(arrayable(t))return decodeURIComponent(escape(_atob(String.fromCharCode.apply(null,Array.prototype.map.call(new Uint8Array(t),(function(e){return e}))))))}},formatNumber=function(e){return(e=e.toString())[1]?e:"0"+e},formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",r=String.prototype.constructor();if(typeis(e)!==Types.date&&!stringable(e))return r;if(typeis(e)===Types.string&&(e=new Date(e)),"Invalid Date"===e.toString())return r;for(var n=e,o={Y:n.getFullYear(),M:n.getMonth()+1,D:n.getDate(),h:n.getHours(),m:n.getMinutes(),s:n.getSeconds()},i=0,a=Object.keys(o).length>>>0;i<a;i++)if(o.hasOwnProperty(o[i])&&isNaN(o[o[i]]))return r;var s={Y:o.Y.toString(),yyyy:o.Y.toString(),M:o.M.toString(),MM:formatNumber(o.M),d:o.D.toString(),dd:formatNumber(o.D),h:o.h.toString(),hh:formatNumber(o.h),m:o.m.toString(),mm:formatNumber(o.m),s:o.s.toString(),ss:formatNumber(o.s)},l=t.split(/-| |:|\//);r=t;for(var u=0;u<l.length;u++){var c=l[u];r=r.replace(c,s[c])}return r},timezoneDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;if([e,t,r,n,o,i].every((function(e){return typeis(e)===Types.number&&e>=0}))){var s=new Date(Date.UTC(e,t-1,r,n,o,i)),l=new Date(s.toLocaleString("en-US",{timeZone:"UTC"})),u=s;if(stringable(a))u=new Date(s.toLocaleString("en-US",{timeZone:a}));else if("Invalid Date"===(u=new Date("".concat(t,"/").concat(r,"/").concat(e," ").concat(n,":").concat(o,":").concat(i))).toString())return;var c=l.getTime()-u.getTime();return s.setTime(s.getTime()+c),s}},mappable=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.map&&(!t||e.size>0)},rangeRandom=function(e,t){return!isNumberic(e)||!isNumberic(t)||e>t?Math.random():Math.random()*(t-e)+e},numberic=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0;if(isNumberic(e,void 0,!1)){var n=+e,o=Math.sign(n);n=Math.abs(n);var i=isNumberic(t,!0)?+(1+Array(t).fill(0).join("")):100,a=Math.round((n+Number.EPSILON)*i)/i;return o*((r=isNumberic(r,!0)?r:t)>0?+a.toFixed(r):a)}},sleep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return new Promise((function(t){return setTimeout(t,e)}))},settable=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.set&&(!t||e.size>0)},PromiseStatus;!function(e){e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(PromiseStatus||(PromiseStatus={}));var PromisePolyfill=function(){function e(t){var r=this;_classCallCheck$1(this,e),_defineProperty$1(this,"status",void 0),_defineProperty$1(this,"value",void 0),_defineProperty$1(this,"reason",void 0),_defineProperty$1(this,"onResolvedClosures",void 0),_defineProperty$1(this,"onRejectedClosures",void 0),this.status=PromiseStatus.pending,this.value=void 0,this.reason=void 0,this.onResolvedClosures=[],this.onRejectedClosures=[];var n=function(e){r.status===PromiseStatus.pending&&(r.status=PromiseStatus.rejected,r.reason=e,r.onRejectedClosures.forEach((function(e){return e()})))};try{t((function(e){r.status===PromiseStatus.pending&&(r.status=PromiseStatus.fulfilled,r.value=e,r.onResolvedClosures.forEach((function(e){return e()})))}),n)}catch(e){n(e)}}return _createClass$1(e,[{key:"then",value:function(t,r){var n=this;t="function"==typeof t?t:function(e){return e},r="function"==typeof r?r:function(e){throw e};var o=new e((function(e,i){n.status===PromiseStatus.fulfilled&&micro((function(){try{var r,a=null===(r=t)||void 0===r?void 0:r(n.value);resolvePromise(o,a,e,i)}catch(e){i(e)}})),n.status===PromiseStatus.rejected&&micro((function(){try{var t,a=null===(t=r)||void 0===t?void 0:t(n.reason);resolvePromise(o,a,e,i)}catch(e){i(e)}})),n.status===PromiseStatus.pending&&(n.onResolvedClosures.push((function(){micro((function(){try{var r,a=null===(r=t)||void 0===r?void 0:r(n.value);resolvePromise(o,a,e,i)}catch(e){i(e)}}))})),n.onRejectedClosures.push((function(){micro((function(){try{var t,a=null===(t=r)||void 0===t?void 0:t(n.reason);resolvePromise(o,a,e,i)}catch(e){i(e)}}))})))}));return o}},{key:"catch",value:function(e){return this.then(void 0,e)}}]),e}();function micro(e){return"undefined"!=typeof window?window.queueMicrotask(e):process.nextTick(e)}function resolvePromise(e,t,r,n){if(t===e)return n(new TypeError("Chaining cycle detected for promise"));var o=!1;if(null===t||"object"!==_typeof$1(t)&&"function"!=typeof t)r(t);else try{var i=t.then;"function"==typeof i?i.call(t,(function(t){o||(o=!0,resolvePromise(e,t,r,n))}),(function(e){o||(o=!0,n(e))})):r(t)}catch(e){if(o)return;o=!0,n(e)}}_defineProperty$1(PromisePolyfill,"resolve",void 0),_defineProperty$1(PromisePolyfill,"reject",void 0),_defineProperty$1(PromisePolyfill,"race",void 0),_defineProperty$1(PromisePolyfill,"all",void 0),_defineProperty$1(PromisePolyfill,"deferred",void 0),PromisePolyfill.resolve=function(e){return new PromisePolyfill((function(t,r){return t(e)}))},PromisePolyfill.reject=function(e){return new PromisePolyfill((function(t,r){return r(e)}))},PromisePolyfill.race=function(e){return new PromisePolyfill((function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)}))},PromisePolyfill.all=function(e){var t=Array(),r=0;return new PromisePolyfill((function(n,o){for(var i=function(i){e[i].then((function(o){!function(n,o,i){t[n]=o,++r===e.length&&i(t)}(i,o,n)}),o)},a=0;a<e.length;a++)i(a)}))},PromisePolyfill.deferred=function(){var e={};return e.promise=new PromisePolyfill((function(t,r){e.resolve=t,e.reject=r})),e};var Jstd=Object.freeze({__proto__:null,arrayable:arrayable,arrayUnique:arrayUnique,arrValsCount:arrValsCount,arrValCount:arrValCount,get _btoa(){return _btoa},get _atob(){return _atob},url2Blob:url2Blob,str2Buffer:str2Buffer,buffer2Str:buffer2Str,typeis:typeis,re:re,formatDate:formatDate,timezoneDate:timezoneDate,get Types(){return Types},get TypesDesc(){return TypesDesc},inEnum:inEnum,mappable:mappable,rangeRandom:rangeRandom,numberic:numberic,objectable:objectable,optional:optional,extractable:extractable,assign:assign,objReverse:objReverse,isNil:isNil,isNull:isNull,isUndefined:isUndefined,isNumberic:isNumberic,sleep:sleep,settable:settable,stringable:stringable,strLen:strLen,PromisePolyfill:PromisePolyfill}),Scgi=function(){function e(t,r,n,o){_classCallCheck(this,e),this.mkey=t||btoa(window.location.origin),this.dKey=r||btoa(window.location.href),this.cache=this._isStore(n)?n:window.localStorage,this.strip=";",this.encrypt=!this._isBool(o)||o}return _createClass(e,[{key:"_isBool",value:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)}},{key:"_isStore",value:function(e){return"[object Storage]"===Object.prototype.toString.call(e)}},{key:"_empty",value:function(){return!this.cache||!this.cache.getItem(this.mkey)}},{key:"_has",value:function(e){var t=this.cache.getItem(this.mkey);return(t=t?this._dec(t):null)&&t.hasOwnProperty(e||this.dKey)?t[e||this.dKey]:null}},{key:"_enc",value:function(e){return JSON.stringify.call(null,this.encrypt?str2Buffer(JSON.stringify.call(null,e)):e)}},{key:"_dec",value:function(e){try{return this.encrypt?JSON.parse.call(null,buffer2Str(JSON.parse.call(null,e))):JSON.parse.call(null,e)}catch(e){return}}},{key:"_gc",value:function(){var e=this.cache.getItem(this.mkey);if(!e)return!0;var t=Object.prototype.constructor(),r=this._dec(e);for(var n in r)r.hasOwnProperty(n)&&r[n].split(this.strip)[2]>+new Date&&(t[n]=r[n]);Object.keys(t).length>0?this.cache.setItem(this.mkey,this._enc(t)):this._gcAll()}},{key:"_gcAll",value:function(){this.cache.removeItem(this.mkey)}},{key:"value",set:function(e){var t=e.value,r=e.seconds;if(r<0)this._gcAll();else{var n=void 0,o=+new Date;n=this._empty()?_defineProperty({},this.dKey,t+this.strip+r+this.strip+(o+1e3*r)):Object.assign(this._dec(this.cache.getItem(this.mkey)),_defineProperty({},this.dKey,t+this.strip+r+this.strip+(o+1e3*r))),this.cache.setItem(this.mkey,this._enc(n)),this._gc()}},get:function(){if(this._empty()||!this._has())return null;this._gc();var e=this.cache.getItem(this.mkey);if(!e)return null;var t=this._dec(e)[this.dKey];if(t){var r=_slicedToArray(t.split(this.strip),2);return{value:r[0],seconds:r[1]}}return null}}]),e}(),index=new Scgi;export default index;export{Scgi};
